
<div align=center>

![image](https://github.com/kinggodgeneralteam2/BE05-FIN-2TEAM-MINGLECRM-BACKEND/assets/98157935/24493327-b0ba-43ea-97c7-431144693501)

<h1 align=center> 호텔 & 다이닝 비지니스를 위한 고객 관리 시스템 </h1>

 
|<img src="https://avatars.githubusercontent.com/u/85616993?v=4" width="150" height="150"/>|<img src="https://avatars.githubusercontent.com/u/98157935?v=4" width="150" height="150"/>|<img src="https://avatars.githubusercontent.com/u/65129708?v=4" width="150" height="150"/>|<img src="https://avatars.githubusercontent.com/u/156767787?v=4" width="150" height="150"/>|<img src="https://avatars.githubusercontent.com/u/155680893?v=4" width="150" height="150"/>|
|:-:|:-:|:-:|:-:|:-:|
|강찬미<br/>[@chan-nni](https://github.com/chan-nni)|장명훈<br/>[@indoor98](https://github.com/indoor98)|하지민<br/>[@zzimni](https://github.com/zzimni)|김동욱<br/>[@hsw50108](https://github.com/hsw50108)|권성지<br/>[@holyplace129](https://github.com/holyplace129)|

</div>

 <details>
 <summary>
    <h1>🌼프로젝트 기획서</h1>
  </summary>

<h2> 프로젝트 개요 </h2>
# **프로젝트 개요**

---

- 팀 명 : Mingle
    
    ![image](https://github.com/kinggodgeneralteam2/BE05-FIN-2TEAM-MINGLECRM-BACKEND/assets/98157935/7a6d76e4-0092-4b8c-8921-011285b5ebed)

    
    - Mingle은 “섞이다” 라는 의미를 가진 영단어입니다. 서로 다른 생각, 배경, 경험을 가진 사람들이 상호작용하고 협력하여 새로운 아이디어를 창출한다는 의미를 담아 팀 이름을 지었습니다.
- 프로젝트 명칭 : Mingle-CRM
    - Mingle 팀이 만들었다는 의미에서 프로젝트 명칭을 Mingle-CRM으로 결정하였습니다.
- 프로젝트 기간 : 2024 5/8 ~ 7/3
- 팀원 : 강찬미, 권성지, 김동욱, 장명훈, 하지민
- 프로젝트 요약 : 호텔&다이닝 서비스를 제공하는 기업이 효과적으로 고객을 관리 하고 마케팅 업무를 수행할 수 있도록 보조하는 고객 관리 시스템입니다.

# **프로젝트 목표 및 타겟**

---

- 프로젝트 배경
    - 이전 PM(Personal Mobility) 업체의 CX팀의 인턴으로 근무했던 팀원은 업무에 불편함을 느꼈습니다. 성수기 기준 주 평균 4,000개의 문의 중 유의미한 인사이트를 도출해내는 것은 상당한 시간이 필요했습니다. 기존의 CRM서비스는 불특정 다수의 기업에게 서비스하기 때문에 사용하는 기업에게 불필요한 결과들까지 보여지는 것이 문제였습니다.
    - 저희는 호텔과 다이닝 서비스 기업을 상정하고, 이를 위한 고객 관리에 특화된 기능을 구현하는 것을 최우선 목표로 정했습니다.

- 프로젝트 목표
    - 프로젝트의 핵심 목표는 이용자(호텔/다이닝 서비스 관계자)들이 본인의 업무를 효율적/효과적으로 수행할 수 있도록 돕는 것입니다.
    - 따라서 이를 위해 단순한 고객 데이터 조회를 넘어 생성형 AI를 사용한 고객 리뷰 요약, 통계 생성 및 시각화, 이메일 추적 등을 주요 목표로 삼았습니다.

# **주요 기능**

---

### 사용자 관리

- 고객 관리 시스템을 사용하는 직원들을 관리하는 기능입니다.
- 직급 별로 접근할 수 있는 API에 차이를 두었습니다.
- 최고 관리자인 MANAGER의 경우 다른 직원들의 정보를 조회/수정/생성/삭제 할 수 있는 권한을 갖습니다.

### 고객 관리

- 사용자는 고객 정보를 관리하고 관련 작업을 수행할 수 있습니다.
- 고객 정보 보호를 위한 전체 목록 조회 시 Masking 처리 및 사용자가 특정 고객의 상세 정보를 조회할 경우 로그를 남기도록 구현하였습니다.
- 특정 고객과 관련된 정보 / 예약 / 결제 / 바우처 등을 목적에 맞게 다중 조건을 사용하여 조회할 수 있습니다.

### 마케팅 ( 이메일 )

- 사용자는 고객에게 메일을 통하여 마케팅 업무를 수행할 수 있습니다.
- 이벤트 안내 이메일, 바우처 발급 안내 이메일을 보낼 수 있습니다.
- 고객의 메일 열람 여부와 열람 시간을 추적할 수 있습니다.

### 문의 & 상담

- 사용자는 고객이 작성한 문의 내역을 확인할 수 있으며 이에 대한 답변을 작성 및 수정할 수 있습니다.
- 만일 고객의 문의 내역에 대한 조치가 필요한 경우 조치 내역과 그 여부에 대해 관리, 추적할 수 있는 기능을 구현하였습니다.

### 통계

- 효과적으로 호텔 및 다이닝 고객을 관리하기 위해 도움이 되는 인사이트를 제공하는 통계 정보를 확인할 수 있습니다.
- 차트, 막대 그래프, 테이블 등 각각의 통계 정보에 적합한 형태로 데이터를 확인할 수 있도록 시각화 하였습니다.

### 사용 기술 스택

---

**Backend**

- Java17
- JPA ( Hibernate, QueryDSL )
- Spring Boot 3
- Spring Security 6 & Jwt
- Redis
- H2 in-memory ( 개발 전용 )
- MariaDB ( 배포 시 사용 )
- Swagger
- Spring Ai
- Spring Batch
- Junit5

**Frontend**

- Vue3
- Quasar
- Pinia ( 상태 관리 )

**CI/CD**

- Docker & Docker Hub
- CI : Git Actions
- CD : AWS(EC2, S3, Code Deploy?, Cloud Front)
</details>

 <details>
 <summary>
   <h1> 🌼요구사항 정의서 </h1>
  </summary>
  
<h1> 요구사항 정의서 </h1>
**📌 목적**

- 호텔 & 다이닝 고객 관리를 위한 서비스

**📌  권한 분류**

- Manager / Staff / Marketer / Consultant 구별 - 이 모두를 통틀어 직원이라 하겠음
- 권한 별로 수행할 수 있는 기능에 차이가 있습니다.
    - Manager : 모든 권한을 갖고 있습니다. 시스템의 Admin 계정 역할도 수행합니다.
    - Staff : 스태프는 호텔 데스크 직원입니다. 따라서 고객 정보 조회 / 예약 확인 등 응대 관련 기능에 접근이 가능합니다.
    - Marketer : 기업에서 마케팅을 담당하는 직원입니다. 마케팅을 위한 고객 관련 통계 정보에 접근이 가능합니다.
    - Consultant : 고객의 문의(또는 상담)를 담당하는 직원입니다. 고객의 문의 상담과 관련된 기능에 접근이 가능합니다.

**📌  계정**

- 회원가입
    - 직원들은 이름, 이메일(인증 필요), 비밀번호 데이터를 입력해 회원가입을 할 수 있습니다.
        - 회원가입 시 이메일 인증이 필요합니다.
        - 비밀번호는 암호화되어 데이터베이스에 저장됩니다.
- 로그인
    - 직원들은 이메일과 비밀번호를 입력해 로그인을 할 수 있습니다.
    - **로그인 시 투 팩터 인증을 사용합니다.**
        - 로그인 시 이메일로 난수를 보낸 후 이를 입력하는 방식으로 인증합니다.
- 로그아웃
    - 직원들은 로그아웃 버튼을 눌러 로그아웃을 할 수 있습니다.
- 계정 수정
    - 직원들은 비밀번호를 수정할 수 있습니다.
        - 수정 시에도 투 팩터 인증을 사용 ( 보류 )
    - ~~직원들은 비밀번호를 찾을 수 있습니다.~~
        - 비밀번호 찾기 시에도 이메일 인증이 필요합니다. ( 보류 )
- 회원 탈퇴
    - 매니저는 직원을 탈퇴 시킬 수 있다. ( 보류 )
    - 직원은 본인의 계정을 탈퇴할 수 있다. ( 보류 )

**📌 매니저(Admin) 기능**

- 매니저는 직원이 회원가입 시 승인 / 거부를 할 수 있습니다.
    - 승인 / 거부 요청은 로그로 남습니다.
- 매니저는 직원 리스트(이메일, 이름, 직책(권한)) 를 볼 수 있습니다.
- **매니저는 특정 직원이 고객 상세 정보에 접근한 로그 기록을 확인할 수 있습니다.**

**📌 고객 (정보) 관리**

- 고객 등급은(NEW, BASIC, VIP, VVIP) 4가지로 나누어진다.
- 고객 성별은(FEMALE, MALE) 2가지로 나누어진다.

- **고객 목록**
- 직원은 고객 관리 탭에서 고객 목록(고객 이름, 고객 등급, 전화번호, 담당자,  생년월일, 리워드 잔액)을 조회(고객 상세 정보는 마스킹 처리) 할 수 있다.
- 직원은 고객 관리 고객명, 등급, 성별로 검색이 가능하다.

- **고객 상세 - 고객 요약**
- 직원은 고객 상세 **고객 요약** 탭에서 고객 ID, 고객 이름, 고객 등급, 전화번호, 주소, 담당자, 메모, 성별, 생일, 나이를 조회할 수 있다.
- 직원은 고객 상세에서 고객에 대한 메모를 등록, 수정, 삭제할 수 있다.

- **고객 상세 - 고객 선호도 내역**
- 직원은 고객 선호 사항(흡연 여부, 방문 목적, 반려동물 동반 여부, 선호 체크인 / 체크아웃 시간, 식이 제한, 유입 경로, 관심사, 아침 식사 선호 여부)을 확인할 수 있다.

- **고객 상세 - 예약 내역(호텔 예약)**
- 직원은 고객 예약 날짜, 고객명, 전화번호, 호텔명 방 유형을 확인할 수 있다.
- 직원은 고객 예약 날짜, 고객명, 전화번호, 호텔명 방 유형을 검색할 수 있다.
- 직원은  호텔 상세 예약 정보에서 고객 예약 날짜, 고객명, 전화번호, 호텔명, 방 유형, 고객명을 검색할 수 있다.

- **고객 상세 - 예약 내역(다이닝 예약)**
- 직원은 예약 날짜, 방문 날짜, 총 가격, 음식(총 가격)을 확인 할 수 있다.
- 직원은 예약 날짜, 방문 날짜, 총 가격, 음식(총 가격)을 검색 할 수 있다.

- **고객 상세 - 상담내역**
- 직원은 고객명, 전화번호, 문의 날짜, 문의 타입, 답변 여부를 확인할 수 있다.
- 직원은 고객명, 전화번호, 문의 날짜, 문의 타입, 답변 여부를 검색할 수 있다.
- 직원은 고객 문의 상세에서 고객명, 전화번호, 문의 날짜, 문의 타입, 답변 여부, 담당 직원명, 문의 제목, 문의 내용, 문의 상태를 조회할 수 있다.

- 고객 상세 - 결제 내역
- 직원은 고객명, 전화번호, 결제 종류, 결제 금액, 결제 날짜, 환불 여부를 조회할 수 있다.
- 직원은 고객명, 전화번호, 결제 종류, 결제 금액, 결제 날짜, 환불 여부를 검색할 수 있다.
- 직원은 고객명, 전화번호, 결제 종류, 할인 전 금액, 할인 금액,  결제 금액, 결제 날짜, 환불 여부, 환불 날짜, 리워드 생성 금액, 결제 지점을 조회할 수 있다.

- **고객 상세 - 바우처 내역**
- 직원은 바우처 ID, 요청 날짜, 인증 여부, 인증 날짜, 전환 여부, 전환 날짜, 발급자 ID, 승인자 ID, 고객 ID, 금액을 조회할 수 있다.
- 직원은 바우처 ID, 요청 날짜, 인증 여부, 인증 날짜, 전환 여부, 전환 날짜, 발급자 ID, 승인자 ID, 고객 ID, 금액을 검색할 수 있다.
- 직원은 바우처 상세 내역에서 바우처 ID, 요청 날짜, 인증 여부, 인증 날짜, 전환 여부, 전환 날짜, 발급자 ID, 승인자 ID, 고객 ID, 금액을 조회할 수 있다.

- **고객 상세 - 리워드 내역**
- 직원은 고객 ID, 리워드 총금액을 조회할 수 있다.

**📌 리워드 & 바우처**

- 상품권 개념의 바우처가 존재한다.
- 바우처는 리워드(포인트 개념)로 변환하여 사용할 수 있다.
- 스태프는 바우처 발급을 신청할 수 있다.
- 매니저는 스태프가 신청한 바우처 발급을 승인 / 거절할 수 있다.
- 결제 시 회원등급에 따라 리워드가 적립됩니다.
    - 웰컴 : 첫방문 바우처 지급, 실버 : 3%, 골드 : 4%, VIP : 5%

**📌 매출 관리**

- 매니저는 기간을 설정하여 판매/결제 내역(결제 id, 총 가격(할인 적용 전), 결제 금액, 결제 장소(어느 지점), 결제 수단, 결제 시간, 결제 상태(환불 여부), 포인트 사용, 바우처 사용,  모든 결제 상품 )을 조회할 수 있다.
    - 결제 내역은 결제 상품/서비스, 바우처 사용 여부, 금액, 지불 방법, 날짜, 호텔 지점을 포함한다.
- ~~매니저는 매출 및 수익을 조회할 수 있다.~~
    - ~~기간 별 조회, 지점 별 조회, 금액 별 조회, 고객 별 조회, 상품 별 조회~~

**📌 마케팅 관리**

- 마케터는 이메일을 활용하여 고객들에게 이벤트 공지와 할인권 공지를 발송할 수 있다. (SMTP)
- **마케터는 메일을 받은 고객의 행태 분석( 메일 열람 여부, 메일에 포함 된 링크 접속 여부 )을 할 수 있다.**

**📌  문의 관리**

- 문의는 전화 문의 / 현장 문의 / 온라인 문의 세 타입이 존재한다.
    - 전화 문의 / 현장 문의는 상담사가 해당 통화 내용을 메모할 수 있도록 한다.
    - 온라인 문의는 상담사가 답변을 할 경우에 고객에게 답변 알림 메일을 보낸다.
- 상담원은 문의내용을 작성할 수 있다.
    - 고객명, 문의 일시, 연락처, 문의 유형, 문의 결과, 문의 내용
- 직원은 문의 목록을 조회할 수 있다.
    - 고객명, 답변자, 문의일자, 답변일자, 답변 여부, 문의 내용, 조치 필요 여부, 조치 내용
- 직원들은 문의 상세 내용을 조회할 수 있다.
    - 고객명, 답변자, 문의일자, 답변일자, 문의 제목, 답변 여부, 문의 내용, 답변 제목, 답변 내용, 조치 필요 여부, 조치 내용

**📌 리뷰**

- 호텔 RoomType은 다음과 같습니다.
    
    Superior, Deluxe Double, Deluxe Twin, Premier Suite,
    
    Executive Suite, Residential Suite, Plaza Suite,
    
    Presidential Suite, Royal Suite
    
- 직원은 호텔 고객이 작성한 리뷰를 기간 / 작성자 / 룸 타입 옵션을 사용하여 조회할 수 있습니다.
- 직원은 호텔 고객이 작성한 리뷰를 기간 / 룸 타입 옵션을 사용하여 요약문을 생성하고, 조회할 수 있습니다.
- 직원은 다이닝 고객이 작성한 리뷰를 기간 / 작성자 / 식당 옵션을 사용하여 조회할 수 있습니다.
- 직원은 다이닝 고객이 작성한 리뷰를 기간 / 식당 옵션을 사용하여 요약문을 생성하고, 조회할 수 있습니다.

**📌 이메일**

- 직원은 이메일을 발송할 수 있습니다. (단일 고객 발송 / 단체 고객 발송)
    - 이메일 발송은 하나의 이벤트로 저장됩니다.
- 직원은 이메일 발송 로그를 기간별로 조회할 수 있습니다.
- 직원은 이벤트 별 총 발신자 수와 열람한 고객 수를 확인할 수 있습니다.
- 고객의 이메일 열람 여부와 열람 시간을 조회할 수 있습니다.

**📌  통계 관리**

- ~~직원은 기간을 설정하여 고객 신규 유입자 수를 조회할 수 있다.~~
    - batch x
- *~~직원은 기간을 설정하여 방문 고객을 조회할 수 있다.~~*
    - batch x
- ~~직원은 특정 그룹 별 고객 **재방문율**을 조회할 수 있다.~~
    - batch o
    - 직원은 고객 카테고리를 설정해 고객 통계를 조회할 수 있다. (성별 별, 나이 별, 거주지 별)
    - 재방문율 = 두 번 이상 방문 고객 / 총 고객 수
- *~~직원은 특정 방문 횟수 이상인 고객을 조회할 수 있다.~~*
    - ~~batch x~~
- ~~직원은 월/주/일 별 예약 수를 조회할 수 있다.~~
    - batch o
- 직원은 월/주/일 별 판매된 방 수를 조회할 수 있다.
    - batch o
- ~~생일 1주일 전 고객에게 자동으로 바우처를 제공한다.~~
    - 등급 별 차등 지급
- 고객을 카테고리에 맞게 클러스터링 해준다. ( 성별 별, 나이 별, 거주지 별 등등 )
- 직원은 고객에게 전송한 마케팅 이메일의 성과를 조회할 수 있다.(이메일 조회 수, 이메일 내 링크 접속 수)
- ~~직원은 기간을 설정하여 판매된 상품(dish) 수를 조회할 수 있다.~~
    - batch o
- 직원은 기간을 설정하여 **고객** 그룹 별 많이 구매한 상품 순위 목록을 조회할 수 있다.
    - batch x
- 발송한 이벤트 이메일에 대한 열람율 및 포함된 링크 클릭율을 시각화하여 볼 수 있다.
   
</details>

 <details>
 <summary>
   <h1>🌼시스템 아키텍처 </h1> 
  </summary>
 
  ![mingle 시스템 아키텍쳐](https://github.com/kinggodgeneralteam2/BE05-FIN-2TEAM-MINGLECRM-BACKEND/assets/85616993/f34f0d93-e69b-4189-9a3d-386b6e714efb)
  
</details>

 <details>
 <summary>
 <h1> 🌼화면 설계서 </h1>
   
  </summary>
  (https://www.figma.com/design/vgABOThuvnOdEdwMbqtJk2/mingle?node-id=0-1&t=Igw3yxiZ4yRqkeHs-0)
</details>


 <details>
 <summary>
  <h1>  🌼ERD </h1>
  </summary>
  <img width="1039" alt="스크린샷 2024-05-20 오전 10 51 37" src="https://github.com/kinggodgeneralteam2/BE05-FIN-2TEAM-MINGLECRM-BACKEND/assets/98157935/2b0bfef2-19e0-45c6-bfca-202a21ede0be">

</details>

 <details>
 <summary>
   <h1> 🌼WBS </h1>
  </summary>
   
  ![image](https://github.com/kinggodgeneralteam2/BE05-FIN-2TEAM-MINGLECRM-BACKEND/assets/98157935/93b66f1b-be44-4349-9ed0-ae2dfdf30701)



</details>


